
K，K线，Candle蜡烛图。


T，技术分析，工具平台


L，公式Language语言使用c\+\+14，Lite小巧简易。


项目仓库：[https://github.com/bbqz007/KTL](https://github.com)     


国内仓库：[https://gitee.com/bbqz007/KTL](https://github.com)


当前0\.9\.2新添加功能基于QCharts跟通达信mdt数据文件。


1\. 数据分析工具，AlgoSysDataTool.cpp添加QCharts的K线图预览通达信日线文件。


2\. 新添加图表分析工具，AlgoSysChartsTool.cpp


2\.1 解析通达信每日市场全景数据mdt文件。


2\.2 提供每日全景数据星空图。


2\.3 提供每日涨跌分布大饼图。


2\.4 提供每日全景数据列表，特殊列当日K线形状。


2\.5 提供日期区间段全景涨幅汇总，特殊列评级形态。


3\. 通过我的cvtool工具利用opencv找相似K线波段。


 


添加K线预览通达信日线文件，纯粹为了演示。20行代码就能用QCharts写一个K线图，也就只能是好玩演示。按住CTRL，用鼠标可以拖动K线图，滑轮放大缩小坐标比例。


![](https://img2024.cnblogs.com/blog/665551/202411/665551-20241113124659535-1514042379.gif)


 


然后是主要新增功能，市场全景图。


![](https://img2024.cnblogs.com/blog/665551/202411/665551-20241113125018373-1744278603.png)


星空图（直角坐标系）有三个维度，横坐标振幅，纵坐标是涨幅。点的粗细代表成交量。以斜率1：1跟1：\-1可以划分出两个区域，位于斜线左侧的，表示振幅小于涨幅绝对值，如果是涨的就是高开了，如果是跌的就是低开了。斜线右侧的，表示振幅大于涨幅绝对值，发生过最高转低或最低转高。按住CTRL通过鼠标滑轮放大缩小坐标。


星空图（极坐标系）同样是三个维度，角坐标是涨幅，半径坐标是振幅。点的粗细代表成交量。左侧代表涨，右侧代表跌。靠近下方表示涨跌得轻，靠近上方表示涨跌得猛。越往外环振幅越大，可能越激，越往内环也就振幅越小没什么起伏。按住CTRL通过鼠标滑轮放大缩小半径坐标。左右拖动调整角坐标位置。


成交量过滤器，可以过滤掉不同等级的成交量的点。使用者可以根据需要，自己修改代码，调整等级划分，或者改用成交额，加权等其它数据。


涨跌家数。这里有4个比例大饼图。市场当日全部交易个股按涨幅等级归类，形成比例大饼。从10%到\-10%划分十个等级。并且颜色从红到绿。按绝对值大小分深浅色。越红涨得多，越绿跌得惨。第一个图是涨幅，下面的图是对比今开的收盘的涨幅，右面的图是今开相对昨收的幅度，反映的昨天市场情绪的延续，高开低开的分布比例。右下图是振幅相关，振幅集中于几多。


全景行情列表， 提供日K线形状列。通过符号文字来画出。可以通过排序来归类出相同K线形状的个股。振幅线用\=号表示，开收线用\+或\*号表示，\+表示收高于开，\*表示收低于开。HL表示最高最低即图的方向。画到列表上就是一根横躺的日K线。双击树型全景数据文件名，就可以打开这个文件的全景数据，生成星空图，大饼图，还有列表。


双击.cod打开A股（包含中小板，创业科创），双击.mdt打开B股。


![](https://img2024.cnblogs.com/blog/665551/202411/665551-20241113134606936-927001841.png)


多日全景汇总列表。 需要选定一个全景文件，右键菜单打开。以这个全景文件的日期为界限，汇总之前的全部文件，或是之后的全部文件。汇总对象是每一个个股的每日涨幅。并且日期区间的起始价跟结束价，以及终止涨幅。最后是一个特殊列，形态评级。将一个个股的每日涨幅按等级评分，10%到\-10%划分成 A\-J 十个等级，A\-E是对应正数，F\-J是对应负数。A是涨停级别，J则是跌停级别。最后汇总并集。使用者可以按自己的需要，制作自己想要的评级形态。


![](https://img2024.cnblogs.com/blog/665551/202411/665551-20241113135730139-551808401.png)


排序后


![](https://img2024.cnblogs.com/blog/665551/202411/665551-20241113141454040-365332158.png)


![](https://img2024.cnblogs.com/blog/665551/202411/665551-20241113144225954-2029377224.png)


 


发布提供两个数据样本，shmdt.zip包含240926到241111的数据，对应于10到11月本轮牛市数据。shmdt2\.zip包含24年6月熊市数据。可以对比。


![](https://img2024.cnblogs.com/blog/665551/202411/665551-20241113143924403-105113031.gif)


 


下面就是介绍如何使用我的cvtool工具，利用opencv找相似K线。


![](https://img2024.cnblogs.com/blog/665551/202411/665551-20241113144407913-427181765.png)


步骤：


1\. 将你要分析的K线图，使用白底配色方案保存成带数字编号结尾的图片，如001\.png， 002\.png。


2\. cvtool 你的图片名 match。执行这个命令打开你的图片。


3\. 在select窗口，用鼠标框选出一段K线，然后在鼠标滑轮键双击提交。


4\. 结果会显示在match窗口。


5\. 在match窗口调整算法参数，推荐SQIFF NORMED，即第一条bar。第二条bar调整阀值，值越大越多错误结果，越小越少甚至过滤成无。


6\. 空格键打开下一编号的图，并应用当前match。


因为match算法不是基于ML，所以只能娱乐一下。opencv到底能不能够满足你的要求，自己来调教一下吧。


我的cvtool工具，原本只是用来调试调教opencv参数。介绍地址在[https://github.com/bbqzsl/p/13992225\.html](https://github.com):[楚门加速器](https://chuanggeye.com)。


投资一定有输赢。股市是一个财富再分配工具，你有机会从别人口袋中再分配到财富，也同样有机会将财富再分配给别人。赢的钱不会凭空生出来。


 


另外，KTL这个工具还可以通过编程扩展你需要的任何功能。


例如我在上一个版本提供了两个小功能patch代码。


用sqlchiper浏览微信数据库，解析protobuf数据文件。详细在 [逆向WeChat(七)](https://github.com/bbqzsl/p/18423518 "发布于 2024-10-07 21:52")


本篇结束。


 


mdt数据文件可以在通达信官网下载。


 


